<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>KuppyCloaker V3</title>
<style>
:root {
  --bg: #0f1724;
  --card: #0b1220;
  --muted: #93a3b8;
  --accent: #007bff;
  --text: #e6eef8;
}
* {
  transition: color 0.25s ease, background-color 0.25s ease, border-color 0.25s ease;
}

#homePage {
  display: none;
}

html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

body {
  font-family: Inter, system-ui, sans-serif;
  background-color: var(--bg);
  color: var(--text);
  display: flex;
  justify-content: center;
  align-items: center;
  transition: background-color 0.5s, color 0.5s, opacity 2s ease;
  opacity: 0;
}
body.loaded { opacity: 1; }

.shell {
  background: var(--card);
  border-radius: 14px;
  padding: 22px 30px;
  box-shadow: 0 10px 30px rgba(2,6,23,0.6);
  position: relative;
  width: 100%;
  max-width: 800px;
}
header { display: flex; align-items: center; justify-content: space-between; }

.gear {
  cursor: pointer;
  font-size: 24px;
  color: var(--accent);
  transition: transform 0.4s ease, color 0.3s ease;
  display: inline-block;
}

.gear:hover {
  transform: rotate(90deg) scale(1.1);
  color: var(--text);
}

.gear.spin {
  animation: spinOnce 0.5s ease;
}

@keyframes spinOnce {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

#settingsMenu {
  position: absolute;
  top: 36px;
  right: 36px;
  background: var(--card);
  border: 1px solid rgba(255,255,255,0.05);
  border-radius: 10px;
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.4);
  opacity: 0;
  transform: translateY(-10px) scale(0.95);
  pointer-events: none;
  transition: opacity 0.35s ease, transform 0.35s ease;
  z-index: 9999;
}

#settingsMenu.show {
  opacity: 1;
  transform: translateY(0) scale(1);
  pointer-events: auto;
}

#settingsMenu.show button {
  animation: slideIn 0.25s ease forwards;
}

@keyframes slideIn {
  from { transform: translateX(10px); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

#settingsMenu button {
  background: none;
  border: none;
  color: var(--muted);
  font-size: 20px;
  cursor: pointer;
  transition: color 0.2s, transform 0.2s;
}

#settingsMenu button:hover {
  color: var(--accent);
  transform: scale(1.1);
}

#typedTitle::after {
  content: "|";
  display: inline-block;
  margin-left: 4px;
  animation: blink 1s step-start 5, hideCursor 0s 4s forwards;
  color: var(--accent);
}

#typedTitle {
  text-align: center;
  width: 185%;
}

#settingsIcon {
  position: absolute;
  top: 20px;
  right: 25px;
  font-size: 22px;
  color: var(--accent, #007bff);
  cursor: pointer;
  transition: transform 0.3s ease, color 0.3s ease;
}

#settingsIcon:hover {
  animation: spin 1s linear infinite;
  color: var(--text, #fff);
}

@keyframes blink { 50% { opacity: 0; } }

@keyframes hideCursor { to { opacity: 0; } }

.topbar { display: flex; margin-top: 16px; gap: 10px; }
input {
  flex: 1;
  padding: 12px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.1);
  background: var(--bg);
  color: var(--text);
}
.btn {
  background: var(--accent);
  color: white;
  border: none;
  border-radius: 10px;
  padding: 10px 16px;
  cursor: pointer;
  font-weight: 600;
}
.btn:hover { opacity: 0.9; }

footer {
  margin-top: 20px;
  color: var(--muted);
  position: relative;
}

.card {
  background: rgba(255,255,255,0.05);
  border-radius: 8px;
  padding: 8px;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  text-align: center;
  position: relative;
  box-sizing: border-box;
  width: 135px;       /* fixed compact size */
  min-width: 100px;
  max-width: 155px;
  aspect-ratio: 1 / 1; /* make cards square */
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}
.card span {
  pointer-events: none;
  font-weight: 600;
  text-shadow: 0 0 4px var(--accent), 0 0 5px rgba(0, 123, 255, 0.1);
}
.card img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  border-radius: inherit;
  display: block;
  background: transparent;
}
.card-title {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  background: rgba(0,0,0,0.45);
  opacity: 0;
  transition: opacity 0.18s ease;
  font-weight: 700;
  text-align: center;
  padding: 8px;
  pointer-events: none;
  z-index: 1;
}
.card:hover .card-title { opacity: 1; }
.starBtn, .deleteBtn { z-index: 3; }
.card:hover { transform: translateY(-4px); box-shadow: 0 8px 18px rgba(0,0,0,0.3); }

.starBtn {
  position: absolute;
  top: 8px;
  right: 8px;
  font-size: 18px;
  background: none;
  border: none;
  cursor: pointer;
  color: var(--muted);
}

  .fade {
    transition: opacity 0.5s ease;
  }
  .hidden {
    opacity: 0;
    pointer-events: none;
  }

.forms-icon img {
  width: 20px;
  height: 20px;
  vertical-align: middle;
  margin-left: 8px;
  transition: transform 0.25s ease, filter 0.25s ease;
}

.starBtn.starred { color: gold; }

.deleteBtn {
  position: absolute;
  bottom: 8px;
  right: 8px;
  font-size: 16px;
  background: none;
  border: none;
  cursor: pointer;
  color: var(--muted);
}
.deleteBtn:hover { color: red; }

.presets-grid {
  margin-top: 20px;
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 10px;
  justify-items: center;
}

#gamesPage {
  display: none;
  flex-direction: column;
  align-items: center;
  opacity: 0;
  transition: opacity 0.5s;
  overflow-y: auto;
  overflow-x: hidden;
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  padding-bottom: 40px;
}
#gamesPage.show {
  display: flex;
  opacity: 1;
}

.multiplayer-grid {
  margin-top: 20px;
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 10px;
  justify-items: center;
}

#multigamesPage {
  display: none;
  flex-direction: column;
  align-items: center;
  opacity: 0;
  transition: opacity 0.5s;
  overflow-y: auto;
  overflow-x: hidden;
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  padding-bottom: 40px;
}
#multigamesPage.show {
  display: flex;
  opacity: 1;
}

.arcade-grid {
  margin-top: 20px;
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 10px;
  justify-items: center;
}

#arcadegamesPage {
  display: none;
  flex-direction: column;
  align-items: center;
  opacity: 0;
  transition: opacity 0.5s;
  overflow-y: auto;
  overflow-x: hidden;
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  padding-bottom: 40px;
}
#arcadegamesPage.show {
  display: flex;
  opacity: 1;
}

.puzzle-grid {
  margin-top: 20px;
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 10px;
  justify-items: center;
}

#puzzlegamesPage {
  display: none;
  flex-direction: column;
  align-items: center;
  opacity: 0;
  transition: opacity 0.5s;
  overflow-y: auto;
  overflow-x: hidden;
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  padding-bottom: 40px;
}
#puzzlegamesPage.show {
  display: flex;
  opacity: 1;
}

.obby-grid {
  margin-top: 20px;
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 10px;
  justify-items: center;
}

#obbygamesPage {
  display: none;
  flex-direction: column;
  align-items: center;
  opacity: 0;
  transition: opacity 0.5s;
  overflow-y: auto;
  overflow-x: hidden;
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  padding-bottom: 40px;
}
#obbygamesPage.show {
  display: flex;
  opacity: 1;
}

.sports-grid {
  margin-top: 20px;
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 10px;
  justify-items: center;
}

#sportsgamesPage {
  display: none;
  flex-direction: column;
  align-items: center;
  opacity: 0;
  transition: opacity 0.5s;
  overflow-y: auto;
  overflow-x: hidden;
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  padding-bottom: 40px;
}
#sportsgamesPage.show {
  display: flex;
  opacity: 1;
}

#fadeOverlay {
  position: fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:black;
  opacity:0;
  pointer-events:none;
  transition:opacity 0.5s;
  z-index:9999;
}
#fadeOverlay.active { opacity:1; pointer-events:auto; }
</style>
</head>
<body>
<div class="shell" id="loginShell" style="display:flex; justify-content:center; align-items:center; height:100vh;">

  <div class="login-card" style="background:var(--card); padding:30px; border-radius:16px; box-shadow:0 0 20px rgba(0,0,0,0.5); width:320px; text-align:center;">
    <h1 style="color:var(--accent); margin-bottom:5px;">KuppyCloaker</h1>
    <p id="loginMsg" style="color:red; font-size:12px; height:16px;"></p>
    
<div style="width: 80%; margin: 0 auto 10px auto; box-sizing: border-box;">
  <input id="loginUsername" type="text" placeholder="Username"
         style="width: 100%; padding:10px; margin-bottom:5px; border-radius:8px; border:none; outline:none; font-family: Inter, system-ui, sans-serif; box-sizing: border-box;" />
</div>

<div style="width: 80%; margin: 0 auto 20px auto; position: relative; box-sizing: border-box;">
  <input id="loginPassword" type="password" placeholder="Password"
         style="width: 100%; padding:10px 40px 10px 10px; border-radius:8px; border:none; outline:none; font-family: Inter, system-ui, sans-serif; box-sizing: border-box;" />
  <span id="togglePassword" style="position:absolute; right:10px; top:50%; transform:translateY(-50%); cursor:pointer; user-select:none; color:var(--muted); font-size:16px;">üëÅÔ∏è</span>
</div>
    <button id="loginBtn" style="width:100%; padding:12px; border:none; border-radius:8px; background:var(--accent); color:#fff; font-weight:bold; cursor:pointer;">
      Log In
    </button>
  </div>
</div>

<div class="shell" id="homePage">
<header style="position: relative;">
  <div id="userDisplay" style="position:absolute; top:12px; left:12px; color:var(--accent); font-weight:bold; text-shadow: 0 0 6px var(--accent); font-size:18px;"></div>
  <div style="display: flex; flex-direction: column; align-items: center; width: 100%;">
    <h1 id="typedTitle" style="color:white;"></h1>
    <p style="color:var(--muted); font-size:14px; text-align:center;">
      Lightweight, seamless cloaker. Paste a URL or click a button to start playing instantly.
    </p>
  </div>
    <div style="position:absolute;top:12px;right:12px;">
      <div class="gear" id="gear">‚öôÔ∏è</div>
      <div id="settingsMenu">
        <button id="lightToggle">üí°</button>
        <button id="colorToggle">üé®</button>
        <button id="passwordUnlock">üîí</button>      
        <input type="file" id="bgUpload" accept="image/*" style="display:none;">
<button id="bgButton">üñºÔ∏è</button>  
      </div>
    </div>
  </header>

  <div class="topbar">
    <input id="websiteInput" type="text" placeholder="Enter a game URL" />
    <button id="loadWebsite" class="btn">Open</button>
    <button id="saveWebsite" class="btn">Save</button>
  </div>

<div style="display:flex; flex-direction:column; align-items:center; width:100%; gap:10px; margin-top:20px; margin-bottom:10px;">

  <div style="display:flex; justify-content:center; gap:10px; margin-bottom:10px;">
    <button class="btn" id="sportsGamesBtn">‚öΩ Sports</button>    
    <button class="btn" id="multiGamesBtn">üßë‚Äçü§ù‚Äçüßë Multiplayer</button>
    <button class="btn" id="arcadeGamesBtn">üïπÔ∏è Arcade</button>
    <button class="btn" id="puzzleGamesBtn">üß© Puzzle</button>    
    <button class="btn" id="obbyGamesBtn">üèÉ Obby</button>
  </div>

  <div style="display:flex; justify-content:center; gap:10px;">
    <button class="btn" id="allGamesBtn">üéÆ All Games</button>    
    <button class="btn" id="recentGamesBtn">üïì Recent</button>
    <button class="btn" id="dailyGameBtn">üìÖ Daily Game</button>
    <button class="btn" id="randomGameBtn">üé≤ Random Game</button>
  </div>

</div>

  <div id="homeTab" class="tabContent" style="margin-top:20px;">
    <p id="quote" style="color:var(--muted);text-align:center;"></p>
<div style="text-align:center; margin-top:10px;">
</div>
  </div>

<footer>
  <div>
    <div style="display:flex; align-items:center; gap:6px;">
      <span>Made by Kuppy</span>
      </a>
      <a href="https://docs.google.com/forms/d/e/1FAIpQLSfJDMVpKyTUI2vJoUUcEjCRgWS39s8Yai-5KmWawSi15l0r8Q/viewform?usp=header" 
         target="_blank" 
         title="Send Feedback">
        <img src="https://www.gstatic.com/images/branding/product/1x/forms_2020q4_48dp.png" 
             alt="Forms" 
             style="width:24px; height:24px; vertical-align:middle; border:none;"/>
      </a>
    </div>
  </div>
</footer></div>

<div id="gamesPage">
  <h2>All Games</h2>
  <div class="presets-grid" id="allGamesGrid"></div>
  <button id="backBtn" class="btn" style="margin-top:20px;">‚¨Ö Back</button>
</div>

<div id="multigamesPage">
  <h2>Multiplayer Games</h2>
  <div class="multiplayer-grid" id="multiGamesGrid"></div>
  <button id="multiBackBtn" class="btn" style="margin-top:20px;">‚¨Ö Back</button>
</div>

<div id="arcadegamesPage">
  <h2>Arcade Games</h2>
  <div class="arcade-grid" id="arcadeGamesGrid"></div>
  <button id="arcadeBackBtn" class="btn" style="margin-top:20px;">‚¨Ö Back</button>
</div>

<div id="puzzlegamesPage">
  <h2>Puzzle Games</h2>
  <div class="puzzle-grid" id="puzzleGamesGrid"></div>
  <button id="puzzleBackBtn" class="btn" style="margin-top:20px;">‚¨Ö Back</button>
</div>

<div id="obbygamesPage">
  <h2>Obby Games</h2>
  <div class="obby-grid" id="obbyGamesGrid"></div>
  <button id="obbyBackBtn" class="btn" style="margin-top:20px;">‚¨Ö Back</button>
</div>

<div id="sportsgamesPage">
  <h2>Sports Games</h2>
  <div class="sports-grid" id="sportsGamesGrid"></div>
  <button id="sportsBackBtn" class="btn" style="margin-top:20px;">‚¨Ö Back</button>
</div>

<div id="fadeOverlay"></div>

<script>
const defaultGames = [
  {name: "2048", url: "https://monkeygg2.github.io/games/2048/", img: "https://upload.wikimedia.org/wikipedia/commons/1/1a/2048_Icon.png"},
  {name: "Adventure Capitalist", url: "https://seraph-bi6hosts.vercel.app/games/adventurecapitalist/index.html", img: "https://www.andyroid.net/wp-content/uploads/2015/06/AdVenture-Capitalist-icon.png"},
  {name: "Backyard Baseball", url: "https://script.google.com/macros/s/AKfycbxCGoMs4wmjd_c08SeWaKuJKh9BoQlovbZIbPtzK03OLOQ6CmmImR9s6HpsxCtaHYbi/exec", img: "https://play-lh.googleusercontent.com/DwEQoD1zm9FLxRstBtdWZUXNxgyWgSsOjM0ILPtlAm1L1X7f2RZdmrjizTlOAdoDF_8=w240-h480-rw"},
  {name: "Backyard Basketball", url: "https://script.google.com/macros/s/AKfycbzutG_IKsHOQPExLK1OU1gKUy0FzeES71P13XgouwmJWvJaDi8U26ivFGRD_IHuFIDJ/exec", img: "https://assets-prd.ignimgs.com/2022/12/12/backyardbasketb-1670879687017.jpg?crop=1%3A1%2Csmart&format=jpg&auto=webp&quality=80"},
  {name: "Baldi's Basics", url: "https://milkywaygg.github.io/reider/storage/gxmes/baldis-basics/index.html", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/baldis.webp"},
  {name: "Basket Random", url: "https://maddox05.github.io/basic-ruffle-player/html/basket_random/index.html", img: "https://basketrandom.io/data/image/basket-random.jpg"},
  {name: "Basketball Stars", url: "https://monkeygg2.github.io/games/basketball-stars/", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/basketball-stars.webp"},
  {name: "BitLife", url: "https://monkeygg2.github.io/games/bit-life/", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/bitlife.webp"},
  {name: "Block Blast", url: "https://maddox05.github.io/basic-ruffle-player/html/blocky_puzzle/index.html", img: "https://play-lh.googleusercontent.com/mBpKOJBdmZLHFEfIMT0s27O-jX4MyAXqX-vhugHlTE0FKj188WmFCRElxY-inKX1tMA"},
  {name: "Bloxors", url: "https://seraph-bi6hosts.vercel.app/games/bloxors/index.html", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/bloxorz.webp"},
  {name: "Boxing Random", url: "https://element-games-v5.vercel.app/g/source/boxing-random/index.html", img: "https://taptapshots.net/uploads/2025/8/boxing-random.webp"},
  {name: "Clash Royale", url: "https://maddox05.github.io/basic-ruffle-player/html/clash_royale/index.html", img: "https://play-lh.googleusercontent.com/gnSC6s8-6Tjc4uhvDW7nfrSJxpbhllzYhgX8y374N1LYvWBStn2YhozS9XXaz1T_Pi2q"},
  {name: "Cookie Clicker", url: "https://monkeygg2.github.io/games/cookie-clicker/", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/cookieclicker.webp"},
  {name: "Tag", url: "https://gswitch3.github.io/g3/tag/", img: "https://math711.github.io/img/class-633.png"},
  {name: "Crossy Road", url: "https://monkeygg2.github.io/games/crossy-road/", img: "https://math711.github.io/img/class-402.png"},
  {name: "Crazy Cattle 3D", url: "https://crazycattle.club/", img: "https://speedstarsfree.io/data/image/crazy-cattle-3d.jpg"},
  {name: "Doodle Jump", url: "https://raw.githack.com/skoolgq/Polaris-Assets/main/doodle-jump/index.html", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/doodle.webp"},
  {name: "Draw The Hill", url: "https://element-games-v5.vercel.app/g/source/draw-the-hill/index.html", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTK8WYV2uyGpWXy2lKdzlsSWfdTCK9LcDs1ZQ&s"},
  {name: "Drift Boss", url: "https://monkeygg2.github.io/games/drift-boss/", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/driftboss.webp"},
  {name: "Save My Pet", url: "https://script.google.com/macros/s/AKfycbzzzBlqpi-UH1EolZkm_TwyvFbgdV6fuWz_IjtPNgQ8ZhiPtGODuz0NvWvNlMUVWoeS/exec", img: "https://lh3.googleusercontent.com/sitesv/AAzXCkeawB0OEjln-YEyBxgytcoQQFHO8uxPNWqa-4F5lAcaqsD0l7phlhVHY1FfKUtVZnwgJ0ZgGNxpK7R_h8EIH6drRq8BgwD4sG1VHJiOdTPvPfA-05FRvpZTIaWUs3aoypc64_cYS-YxnmdWeaDrC1pQnoB3v1PKPGH1jeiyJlpRBFGynAuuaY0gJdh0W0jwOzq3jDJhUBPOhwUVG3HxF1MpmW6qA1jL8ivI=w1280"},
  {name: "Drive Mad", url: "https://monkeygg2.github.io/games/drive-mad/", img: "https://play-lh.googleusercontent.com/V_egAxch0phxs10H_Z1QpWRrsH4phd8egT_5ZjYlFbXzXvwpUGpmJMn2h6HgbGkSlZSM"},
  {name: "Fireboy & Watergirl", url: "https://seraph-bi6hosts.vercel.app/games/fireboywatergirl/index.html", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/fireboy.webp"},
  {name: "Flappy Bird", url: "https://seraph-bi6hosts.vercel.app/games/flappy/index.html", img: "https://upload.wikimedia.org/wikipedia/en/thumb/0/0a/Flappy_Bird_icon.png/250px-Flappy_Bird_icon.png"},
  {name: "Fruit Ninja", url: "https://bi66ie619.github.io/g/fruit-ninja.html", img: "https://math711.github.io/img/class-22.png"},
  {name: "Idle Mining Empire", url: "https://pet-byt3.github.io/markosclassroom/s/g/load/idle-mining-empire/index.html", img: "https://unblocked-games.s3.amazonaws.com/media/posts/372/idle-mining-empire-512.jpg"},
  {name: "Geometry Dash", url: "https://seraph-bi6hosts.vercel.app/games/gdlite/index.html", img: "https://math711.github.io/img/class-453.png"},
  {name: "Getaway Shootout", url: "https://monkeygg2.github.io/games/getaway-shootout/", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/rooftop.webp"},
  {name: "Helix Jump", url: "https://seraph-bi6hosts.vercel.app/games/helixjump/index.html", img: "https://static.keygames.com/8/113348/94193/1024x1024/helix-jump.webp"},
  {name: "Infinite Craft", url: "https://maddox05.github.io/basic-ruffle-player/html/nova_craft/index.html", img: "https://play-lh.googleusercontent.com/YJFHGSmrMGuUqyWZ0oZDgDtDErIU2jQY3yT_PG9IRL6s5dBLmKXrXQShM3n8HFoPhkM=w240-h480-rw"},
  {name: "Knife Hit", url: "https://seraph-bi6hosts.vercel.app/games/knifehit/index.html", img: "https://play-lh.googleusercontent.com/Xi15vMCqH2Ke5ndbpP86LAE2djl58hEpTZvnCF2sKUkd7C9D_x-cOGiR6HhsIOUS9Q"},
  {name: "Magic Tiles", url: "https://script.google.com/macros/s/AKfycbzsriooEqdtLu3zcG2AUjtLNeqgETUcTv5duzFgEKlIZAZZsYlq49sR2aN6nSwsAjcs/exec", img: "https://play-lh.googleusercontent.com/u94NKpNjH1sBOiKHevX3_ATM-ozNHg6b186oU9GfnPnHwbdJ7RaeipkCRcVPdf1KRA"},
  {name: "Minecraft 1.12.2", url: "https://element-games-v5.vercel.app/g/source/minecraft-1.12/index.html", img: "https://images.icon-icons.com/2699/PNG/512/minecraft_logo_icon_168974.png"},
  {name: "Monkey Mart", url: "https://seraph-bi6hosts.vercel.app/games/monkeymart/index.html", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/monkey-mart.webp"},
  {name: "Moto X3M", url: "https://monkeygg2.github.io/games/motox3m/", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/motox3m.webp"},
  {name: "Obby on a Bike", url: "https://element-games-v5.vercel.app/g/source/obby-on-a-bike/index.html", img: "https://play-lh.googleusercontent.com/YwxYsY3FW_zhGTZuYjT9MOpv48FKKl90uyM4eyqOjVCPLEbosk2NALJc64arXdPhjq7d"},
  {name: "Climb Simulator", url: "https://script.google.com/macros/s/AKfycbzUPEYWyiXAsI-wbbg-NbWW6ZAZF1FlSqACKLaEQMvPbnqP5zeGHck2VpwfJ9yoO3o7/exec", img: "https://play-lh.googleusercontent.com/BAVIJZwYbS5R02NnvzKGl4Y2xJfUnX0EzrEwwEbnxBMty44EFqTZRFgDRuHLeLZ7NvEE5pC0iBKKeHe44pEyGQ"},
  {name: "Pacman", url: "https://element-games-v5.vercel.app/g/source/pacman/index.html", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/pacman.webp"},
  {name: "Papa Louie", url: "https://seraph-bi6hosts.vercel.app/games/papalouie/index.html", img: "https://img.poki-cdn.com/cdn-cgi/image/q=78,scq=50,width=1200,height=1200,fit=cover,f=png/f54dee3512ad75e89cc256c6bec22f06/papa-louie-when-pizzas-attack.jpeg"},
  {name: "Papa Louie 2", url: "https://maddox05.github.io/basic-ruffle-player/html/papalouie2/index.html", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/papalouie2_100x100%20(1).webp"},
  {name: "Papa Louie 3", url: "https://seraph-bi6hosts.vercel.app/games/papalouie3/index.html", img: "https://img.poki-cdn.com/cdn-cgi/image/q=78,scq=50,width=1200,height=1200,fit=cover,f=png/6e885a340550b9f7985deccc952db551/papa-louie-3.png"},
  {name: "Papa's Burgeria", url: "https://seraph-bi6hosts.vercel.app/games/papasburgeria/index.html", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/burger.webp"},
  {name: "Papa's Freezeria", url: "https://seraph-bi6hosts.vercel.app/games/papasfreezeria/index.html", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/icecream.webp"},
  {name: "Papa's Hotdoggeria", url: "https://seraph-bi6hosts.vercel.app/games/papashotdoggeria/index.html", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS-KwpYmG_9veRHvvfU1xSLP9V5Z4-NG0YUNZG0rXbGvQ&s=10"},
  {name: "Papa's Pancakeria", url: "https://seraph-bi6hosts.vercel.app/games/papaspancakeria/index.html", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRK2yYV4W35JF3qhAMf1PWW5u04eSCR976E6LaN5-xTAQ&s=10"},
  {name: "Papa's Pastaria", url: "https://seraph-bi6hosts.vercel.app/games/papaspastaria/index.html", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTMQlO58zj9CDs3IQMyIWq9S4qtFMAzmGARfONOsLKQjw&s=10"},
  {name: "Papa's Pizzeria", url: "https://seraph-bi6hosts.vercel.app/games/papaspizzaria/index.html", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/papapizza.webp"},
  {name: "Papa's Sushiria", url: "https://seraph-bi6hosts.vercel.app/games/papassushiria/index.html", img: "https://www.culinaryschools.org/kids-games/papas-sushiria/papas-sushiria.jpg"},
  {name: "Papa's Tacomia", url: "https://seraph-bi6hosts.vercel.app/games/papastacomia/index.html", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/taco.webp"},
  {name: "Papa's Wingeria", url: "https://seraph-bi6hosts.vercel.app/games/papaswingeria/index.html", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQZfK-B1alJVGqZQjFz__cCTuc4dn_ofLTJG8PpMDBjhw&s=10"},
  {name: "Paper.io 2", url: "https://studyschool.netlify.app/g/paperio2/", img: "https://math711.github.io/img/class-505.png"},
  {name: "Precision Client", url: "https://milkywaygg.github.io/assets/games/eagler/precision/", img: "https://gitlab.com/uploads/-/system/project/avatar/54241378/Untitled.jpg"},
  {name: "Rise Higher", url: "https://seraph-bi6hosts.vercel.app/games/risehigher/index.html", img: "https://images.hellokids.com/_uploads/_tiny_galerie/20190624/vign-rise-higher-hk-eyc_424.jpg"},
  {name: "Roblox Obby", url: "https://script.google.com/macros/s/AKfycbx-uaFWRwY1q4Gv7pRrd9PR3zbbmsKV5PTGPQZ11-u3EWCiD4xeM2V3_1JBvmJQNxSshw/exec", img: "https://www3.minijuegosgratis.com/v3/games/thumbnails/248207_7_sq.jpg"},
  {name: "Retro Bowl", url: "https://studyschool.netlify.app/g/retro-bowl/", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/retro_bowl_icon.webp"},
  {name: "Retro Bowl College", url: "https://maddox05.github.io/basic-ruffle-player/html/retro_bowl_college/index.html", img: "https://img.poki-cdn.com/cdn-cgi/image/quality=78,width=314,height=314,fit=cover,f=auto/d98547374c4129bf441b754d495e41aa.png"},
  {name: "Run 3", url: "https://monkeygg2.github.io/games/run-3/", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/run3.webp"},
  {name: "Slope", url: "https://raw.githack.com/skoolgq/Polaris-Assets/main/slope/index.html", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/slope.webp"},
  {name: "SnowBall.io", url: "https://seraph-bi6hosts.vercel.app/games/snowbattleio/index.html", img: "https://play-lh.googleusercontent.com/X8FEOENa_t5mlRllBh2RRLc6sMnPIq56Wxa2ndValDOmwzIRhAv7MG6fT97TLQ2DK48"},
  {name: "Stack", url: "https://seraph-bi6hosts.vercel.app/games/stack/index.html", img: "https://childrenandmedia.org.au/assets/images/app-reviews/Stack.png"},
  {name: "Stair Race 3D", url: "https://seraph-bi6hosts.vercel.app/games/stairrace3d/index.html", img: "https://play-lh.googleusercontent.com/ym7hOY7sjtsuZ-CR2tmvtsNEgPTkufUPKdaUKcNHOvJS3bf7CIxA7Eyc23FbnzziPsc"},
  {name: "Stickman Hook", url: "https://monkeygg2.github.io/games/stickman-hook/", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/stickmanhook.webp"},
  {name: "Subway Surfers", url: "https://monkeygg2.github.io/games/subway-surfers/", img: "https://raw.githubusercontent.com/duckmath/icons/refs/heads/main/subway.webp"},
  {name: "Tall.io", url: "https://ubg17.github.io/TallIO/", img: "https://play-lh.googleusercontent.com/dKlY6BOKeda6bk2YkZncxHh-oTlcgIiUr3lWMNXApb1GuF0gmfAv10_q7UacKGZ6hNDK"}, 
  {name: "The Impossible Quiz", url: "https://seraph-bi6hosts.vercel.app/games/theimpossiblequiz/index.html", img: "https://math711.github.io/img/class-480.png"},
  {name: "Time Shooter 2", url: "https://element-games-v5.vercel.app/g/source/time-shooter-2/index.html", img: "https://img.gamedistribution.com/62a72f2da7cb4b609579a47653546e6a-512x512.jpeg"},
  {name: "Time Shooter 3", url: "https://element-games-v5.vercel.app/g/source/time-shooter-3/index.html", img: "https://img.nutwg.com/uploads/2024/05/2024-05-27-202216427.webp"},
  {name: "Tiny Fishing", url: "https://seraph-bi6hosts.vercel.app/games/tinyfishing/index.html", img: "https://math711.github.io/img/class-451.png"},
  {name: "Unfair Mario", url: "https://seraph-bi6hosts.vercel.app/games/unfairmario/index.html", img: "https://m.media-amazon.com/images/M/MV5BYjJhMGZjY2QtYWQ4YS00YmQyLTlhMjUtZGNlZTI1N2VlNGRjXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg"},
  {name: "Wordle Unlimited", url: "https://element-games-v5.vercel.app/g/source/wordle/index.html#daily", img: "https://static01.nyt.com/images/2022/03/02/crosswords/alpha-wordle-icon-new/alpha-wordle-icon-new-smallSquare252-v3.png?format=pjpg&quality=75&auto=webp&disable=upscale"},
  {name: "YoHoHo!", url: "https://monkeygg2.github.io/games/yohoho/", img: "https://math711.github.io/img/class-828.png"}
];

defaultGames.sort((a, b) => {
  const nameA = a.name.toUpperCase();
  const nameB = b.name.toUpperCase();

  if (nameA < nameB) return -1;
  if (nameA > nameB) return 1;
  return 0;
});

const multiGames = [
  {name: "Basket Random", url: "https://maddox05.github.io/basic-ruffle-player/html/basket_random/index.html"},
  {name: "Boxing Random", url: "https://element-games-v5.vercel.app/g/source/boxing-random/index.html"},
  {name: "Tag", url: "https://gswitch3.github.io/g3/tag/"},  
  {name: "Fireboy & Watergirl", url: "https://seraph-bi6hosts.vercel.app/games/fireboywatergirl/index.html"},
  {name: "Getaway Shootout", url: "https://monkeygg2.github.io/games/getaway-shootout/"},
  {name: "Minecraft 1.12.2", url: "https://element-games-v5.vercel.app/g/source/minecraft-1.12/index.html"},
  {name: "Precision Client", url: "https://milkywaygg.github.io/assets/games/eagler/precision/"},
  {name: "Retro Bowl", url: "https://studyschool.netlify.app/g/retro-bowl/"},
];

multiGames.sort((a, b) => {
  const nameA = a.name.toUpperCase();
  const nameB = b.name.toUpperCase();

  if (nameA < nameB) return -1;
  if (nameA > nameB) return 1;
  return 0;
});

const arcadeGames = [
  {name: "2048", url: "https://monkeygg2.github.io/games/2048/"},
  {name: "Backyard Baseball", url: "https://script.google.com/macros/s/AKfycbxCGoMs4wmjd_c08SeWaKuJKh9BoQlovbZIbPtzK03OLOQ6CmmImR9s6HpsxCtaHYbi/exec"},
  {name: "Backyard Basketball", url: "https://script.google.com/macros/s/AKfycbzutG_IKsHOQPExLK1OU1gKUy0FzeES71P13XgouwmJWvJaDi8U26ivFGRD_IHuFIDJ/exec"},
  {name: "Basket Random", url: "https://maddox05.github.io/basic-ruffle-player/html/basket_random/index.html"},
  {name: "Basketball Stars", url: "https://monkeygg2.github.io/games/basketball-stars/"},
  {name: "Block Blast", url: "https://maddox05.github.io/basic-ruffle-player/html/blocky_puzzle/index.html"},
  {name: "Bloxors", url: "https://seraph-bi6hosts.vercel.app/games/bloxors/index.html"},
  {name: "Boxing Random", url: "https://element-games-v5.vercel.app/g/source/boxing-random/index.html"},
  {name: "Clash Royale", url: "https://maddox05.github.io/basic-ruffle-player/html/clash_royale/index.html"},
  {name: "Tag", url: "https://pet-byt3.github.io/markosclassroom/s/g/load/tag/index.html"},  
  {name: "Crossy Road", url: "https://monkeygg2.github.io/games/crossy-road/"},
  {name: "Crazy Cattle 3D", url: "https://crazycattle.club/"},
  {name: "Doodle Jump", url: "https://raw.githack.com/skoolgq/Polaris-Assets/main/doodle-jump/index.html"},
  {name: "Draw The Hill", url: "https://element-games-v5.vercel.app/g/source/draw-the-hill/index.html"},
  {name: "Drift Boss", url: "https://monkeygg2.github.io/games/drift-boss/"},
  {name: "Save My Pet", url: "https://script.google.com/macros/s/AKfycbzzzBlqpi-UH1EolZkm_TwyvFbgdV6fuWz_IjtPNgQ8ZhiPtGODuz0NvWvNlMUVWoeS/exec"},
  {name: "Drive Mad", url: "https://monkeygg2.github.io/games/drive-mad/"},
  {name: "Fireboy & Watergirl", url: "https://seraph-bi6hosts.vercel.app/games/fireboywatergirl/index.html"},
  {name: "Flappy Bird", url: "https://seraph-bi6hosts.vercel.app/games/flappy/index.html"},
  {name: "Fruit Ninja", url: "https://bi66ie619.github.io/g/fruit-ninja.html"},
  {name: "Geometry Dash", url: "https://seraph-bi6hosts.vercel.app/games/gdlite/index.html"},
  {name: "Getaway Shootout", url: "https://monkeygg2.github.io/games/getaway-shootout/"},
  {name: "Helix Jump", url: "https://seraph-bi6hosts.vercel.app/games/helixjump/index.html"},
  {name: "Knife Hit", url: "https://seraph-bi6hosts.vercel.app/games/knifehit/index.html"},
  {name: "Magic Tiles", url: "https://script.google.com/macros/s/AKfycbzsriooEqdtLu3zcG2AUjtLNeqgETUcTv5duzFgEKlIZAZZsYlq49sR2aN6nSwsAjcs/exec"},
  {name: "Monkey Mart", url: "https://seraph-bi6hosts.vercel.app/games/monkeymart/index.html"},
  {name: "Moto X3M", url: "https://monkeygg2.github.io/games/motox3m/"},
  {name: "Pacman", url: "https://element-games-v5.vercel.app/g/source/pacman/index.html"},
  {name: "Papa Louie", url: "https://seraph-bi6hosts.vercel.app/games/papalouie/index.html"},
  {name: "Papa Louie 2", url: "https://maddox05.github.io/basic-ruffle-player/html/papalouie2/index.html"},
  {name: "Papa Louie 3", url: "https://seraph-bi6hosts.vercel.app/games/papalouie3/index.html"},
  {name: "Papa's Burgeria", url: "https://seraph-bi6hosts.vercel.app/games/papasburgeria/index.html"},
  {name: "Papa's Freezeria", url: "https://seraph-bi6hosts.vercel.app/games/papasfreezeria/index.html"},
  {name: "Papa's Hotdoggeria", url: "https://seraph-bi6hosts.vercel.app/games/papashotdoggeria/index.html"},
  {name: "Papa's Pancakeria", url: "https://seraph-bi6hosts.vercel.app/games/papaspancakeria/index.html"},
  {name: "Papa's Pastaria", url: "https://seraph-bi6hosts.vercel.app/games/papaspastaria/index.html"},
  {name: "Papa's Pizzeria", url: "https://seraph-bi6hosts.vercel.app/games/papaspizzaria/index.html"},
  {name: "Papa's Sushiria", url: "https://seraph-bi6hosts.vercel.app/games/papassushiria/index.html"},
  {name: "Papa's Tacomia", url: "https://seraph-bi6hosts.vercel.app/games/papastacomia/index.html"},
  {name: "Papa's Wingeria", url: "https://seraph-bi6hosts.vercel.app/games/papaswingeria/index.html"},
  {name: "Paper.io 2", url: "https://studyschool.netlify.app/g/paperio2/"},
  {name: "Rise Higher", url: "https://seraph-bi6hosts.vercel.app/games/risehigher/index.html"},
  {name: "Retro Bowl", url: "https://studyschool.netlify.app/g/retro-bowl/"},
  {name: "Retro Bowl College", url: "https://maddox05.github.io/basic-ruffle-player/html/retro_bowl_college/index.html"},
  {name: "Run 3", url: "https://monkeygg2.github.io/games/run-3/"},
  {name: "Slope", url: "https://raw.githack.com/skoolgq/Polaris-Assets/main/slope/index.html"},
  {name: "SnowBall.io", url: "https://seraph-bi6hosts.vercel.app/games/snowbattleio/index.html"},
  {name: "Stack", url: "https://seraph-bi6hosts.vercel.app/games/stack/index.html"},
  {name: "Stair Race 3D", url: "https://seraph-bi6hosts.vercel.app/games/stairrace3d/index.html"},
  {name: "Stickman Hook", url: "https://monkeygg2.github.io/games/stickman-hook/"},
  {name: "Subway Surfers", url: "https://monkeygg2.github.io/games/subway-surfers/"},
  {name: "The Impossible Quiz", url: "https://seraph-bi6hosts.vercel.app/games/theimpossiblequiz/index.html"},
  {name: "Time Shooter 2", url: "https://element-games-v5.vercel.app/g/source/time-shooter-2/index.html"},
  {name: "Time Shooter 3", url: "https://element-games-v5.vercel.app/g/source/time-shooter-3/index.html"},
  {name: "Tiny Fishing", url: "https://seraph-bi6hosts.vercel.app/games/tinyfishing/index.html"},
  {name: "Unfair Mario", url: "https://seraph-bi6hosts.vercel.app/games/unfairmario/index.html"},
  {name: "YoHoHo!", url: "https://monkeygg2.github.io/games/yohoho/"},
];

arcadeGames.sort((a, b) => {
  const nameA = a.name.toUpperCase();
  const nameB = b.name.toUpperCase();

  if (nameA < nameB) return -1;
  if (nameA > nameB) return 1;
  return 0;
});

const puzzleGames = [
  {name: "2048", url: "https://monkeygg2.github.io/games/2048/"},
  {name: "Block Blast", url: "https://maddox05.github.io/basic-ruffle-player/html/blocky_puzzle/index.html"},
  {name: "Bloxors", url: "https://seraph-bi6hosts.vercel.app/games/bloxors/index.html"},
  {name: "Save My Pet", url: "https://script.google.com/macros/s/AKfycbzzzBlqpi-UH1EolZkm_TwyvFbgdV6fuWz_IjtPNgQ8ZhiPtGODuz0NvWvNlMUVWoeS/exec"},
  {name: "Fireboy & Watergirl", url: "https://seraph-bi6hosts.vercel.app/games/fireboywatergirl/index.html"},
  {name: "The Impossible Quiz", url: "https://seraph-bi6hosts.vercel.app/games/theimpossiblequiz/index.html"},
  {name: "Wordle Unlimited", url: "https://element-games-v5.vercel.app/g/source/wordle/index.html#daily"},
];

puzzleGames.sort((a, b) => {
  const nameA = a.name.toUpperCase();
  const nameB = b.name.toUpperCase();

  if (nameA < nameB) return -1;
  if (nameA > nameB) return 1;
  return 0;
});

const obbyGames = [
  {name: "Obby on a Bike", url: "https://element-games-v5.vercel.app/g/source/obby-on-a-bike/index.html"},
  {name: "Roblox Obby", url: "https://script.google.com/macros/s/AKfycbx-uaFWRwY1q4Gv7pRrd9PR3zbbmsKV5PTGPQZ11-u3EWCiD4xeM2V3_1JBvmJQNxSshw/exec"},
];

const sportsGames = [
  {name: "Retro Bowl", url: "https://studyschool.netlify.app/g/retro-bowl/"},
  {name: "Retro Bowl College", url: "https://maddox05.github.io/basic-ruffle-player/html/retro_bowl_college/index.html"},
  {name: "Basketball Stars", url: "https://monkeygg2.github.io/games/basketball-stars/"},
  {name: "Basket Random", url: "https://maddox05.github.io/basic-ruffle-player/html/basket_random/index.html"},
  {name: "Boxing Random", url: "https://element-games-v5.vercel.app/g/source/boxing-random/index.html"},
  {name: "Backyard Baseball", url: "https://script.google.com/macros/s/AKfycbxCGoMs4wmjd_c08SeWaKuJKh9BoQlovbZIbPtzK03OLOQ6CmmImR9s6HpsxCtaHYbi/exec"},
  {name: "Backyard Basketball", url: "https://script.google.com/macros/s/AKfycbzutG_IKsHOQPExLK1OU1gKUy0FzeES71P13XgouwmJWvJaDi8U26ivFGRD_IHuFIDJ/exec"},
];

sportsGames.sort((a, b) => {
  const nameA = a.name.toUpperCase();
  const nameB = b.name.toUpperCase();

  if (nameA < nameB) return -1;
  if (nameA > nameB) return 1;
  return 0;
});

obbyGames.sort((a, b) => {
  const nameA = a.name.toUpperCase();
  const nameB = b.name.toUpperCase();

  if (nameA < nameB) return -1;
  if (nameA > nameB) return 1;
  return 0;
});

const quotes = [
  "Stealth isn‚Äôt hiding. It‚Äôs blending in.",
  "You can‚Äôt block what you can‚Äôt detect.",
  "Freedom starts with a tab.",
  "Kuppy is watching you‚Ä¶ but in a friendly way.",
  "I told my computer a joke. It laughed in binary.",
  "Remember: Every button has consequences.",
  "This isn‚Äôt a bug. It‚Äôs a feature.",
  "If this page was a sandwich, it‚Äôd be extra cheesy.",
  "KuppyCloaker: Making procrastination look productive.",
  "Click responsibly. Or don‚Äôt. Whatever.",
  "Somebody call tech support. Or maybe not.",
  "Your Wi-Fi secretly judges you.",
  "Clicking random things builds character.",
  "Click here‚Ä¶ actually don‚Äôt, maybe.",
  "This page self-destructs in 3‚Ä¶ 2‚Ä¶ just kidding.",
  "Don‚Äôt ask me how this works. I don‚Äôt know either.",
  "Don‚Äôt read this aloud. Unless you want to.",
  "Kuppy believes in you. Mostly.",
  "Fun fact: This page contains 0 calories.",
  "Smiles are contagious. So are pop-ups.",
  "Do not try to hack this‚Ä¶ unless you‚Äôre me.",
  "Cloak smart. Play smarter.",
  "The web, unfiltered.",
  "No limits, no traces, no problem."
];

document.getElementById("quote").textContent = quotes[Math.floor(Math.random() * quotes.length)];

window.addEventListener('load',()=>{
  document.body.classList.add('loaded');

  const savedTabName = localStorage.getItem('kuppyTabName');
  if(savedTabName) document.title = savedTabName;

  const savedTheme = JSON.parse(localStorage.getItem('kuppyTheme')) || {accent:'#007bff', bg:'#0f1724', card:'#0b1220'};
  const isLight = localStorage.getItem('kuppyLightMode') === 'true';

  document.documentElement.style.setProperty('--accent', savedTheme.accent);
  document.documentElement.style.setProperty('--bg', isLight ? lighten(savedTheme.bg) : savedTheme.bg);
  document.documentElement.style.setProperty('--card', isLight ? lighten(savedTheme.card) : savedTheme.card);
  document.documentElement.style.setProperty('--text', isLight ? '#111' : '#e6eef8');

  if(isLight) document.body.classList.add('light');
});

const text="KuppyCloaker V3"; let i=0;

function startTyping(){document.getElementById("typedTitle").textContent=""; typeTitle();}

function typeTitle(){if(i<text.length){document.getElementById("typedTitle").textContent+=text.charAt(i);i++;setTimeout(typeTitle,120);}}

function lighten(hex){
  const c = parseInt(hex.slice(1),16);
  const r = Math.min(255, ((c>>16)+51));
  const g = Math.min(255, (((c>>8)&0x00FF)+51));
  const b = Math.min(255, ((c&0x0000FF)+51));
  return `rgb(${r},${g},${b})`;
}

function openWebsite(url) {
  if (!url) return;
  if (!url.startsWith('http')) url = 'https://' + url;

  const overlay = document.getElementById('fadeOverlay');
  overlay.classList.add('active');

  setTimeout(() => {
    const win = window.open('', '_blank');
    win.document.write(`
<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta name='referrer' content='no-referrer'>
  <title>New Tab</title>
  <style>
    html, body {
      margin: 0;
      height: 100%;
      background: black;
    }

    embed {
      width: 100%;
      height: 100%;
      border: none;
    }

    #backBtn {
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 1000;
      background: rgba(0,0,0,0.6);
      color: white;
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 8px;
      padding: 6px 12px;
      cursor: pointer;
      font-family: system-ui, sans-serif;
      transition: background 0.2s;
    }

    #backBtn:hover {
      background: rgba(255,255,255,0.2);
    }

    #fadeOverlay {
      position: fixed;
      inset: 0;
      background: black;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.6s ease;
      z-index: 2000;
    }

    #fadeOverlay.active {
      opacity: 1;
    }
  </style>
</head>
<body>
  <button id="backBtn">‚¨Ö</button>
  <div id="fadeOverlay"></div>
  <embed src='${url}'></embed>

<script>
  const backBtn = document.getElementById('backBtn');
  const fadeOverlay = document.getElementById('fadeOverlay');

  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      fadeOverlay.classList.add('active');
      setTimeout(() => {
        window.close();
      }, 1);
    }
  });

  backBtn.onclick = () => {
    fadeOverlay.classList.add('active');
    setTimeout(() => {
      window.close();
    }, 600);
  };
  <\/script>
</body>
</html>
`);
overlay.classList.remove('active');
}, 500);
}

function rememberRecentGame(game) {
  localStorage.setItem('recentGame', JSON.stringify(game));
}

// Helper to create a game card element (image-only with hover title overlay)
function createGameCard(g, idx, savedArray, starredArray, categoryLength, reloadFn) {
  const div = document.createElement('div');
  div.className = 'card';

  const imgSrc = g.img || (defaultGames.find(d => d.name === g.name) || {}).img || null;
  if (imgSrc) {
    const img = document.createElement('img');
    img.src = imgSrc;
    img.alt = g.name;
    // ensure rounded corners match the card
    img.style.borderRadius = 'inherit';
    img.onerror = () => {
      // hide broken images but keep overlay available
      img.style.display = 'none';
      div.style.background = 'linear-gradient(135deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02))';
    };
    div.appendChild(img);
  }

  // overlay title (hidden until hover)
  const overlay = document.createElement('div');
  overlay.className = 'card-title';
  overlay.textContent = g.name;
  overlay.style.pointerEvents = 'none';
  div.appendChild(overlay);

  // star button
  const starBtn = document.createElement('button');
  starBtn.className = 'starBtn';
  if (starredArray && starredArray.includes(g.name)) starBtn.classList.add('starred');
  starBtn.innerHTML = '‚òÖ';
  starBtn.onclick = (e) => {
    e.stopPropagation();
    let s = JSON.parse(localStorage.getItem('starredGames') || '[]');
    if (s.includes(g.name)) {
      s = s.filter(x => x !== g.name);
      starBtn.classList.remove('starred');
    } else {
      s.push(g.name);
      starBtn.classList.add('starred');
    }
    localStorage.setItem('starredGames', JSON.stringify(s));
    if (typeof reloadFn === 'function') reloadFn();
  };
  div.appendChild(starBtn);

  // delete button for custom entries (those after the builtin category length)
  if (typeof categoryLength === 'number' && idx >= categoryLength) {
    const del = document.createElement('button');
    del.className = 'deleteBtn';
    del.textContent = '‚ùå';
    del.onclick = (e) => {
      e.stopPropagation();
      const updated = (savedArray || []).filter(x => x.name !== g.name);
      localStorage.setItem('customPresets', JSON.stringify(updated));
      if (typeof reloadFn === 'function') reloadFn();
    };
    div.appendChild(del);
  }

  // click to open
  div.onclick = () => openWebsite(g.url);

  return div;
}

document.getElementById('randomGameBtn').onclick = () => {
  const saved = JSON.parse(localStorage.getItem('customPresets') || '[]');
  const allGames = [...defaultGames, ...saved];
  if (allGames.length === 0) return alert('No games available!');
  const randomGame = allGames[Math.floor(Math.random() * allGames.length)];
  openWebsite(randomGame.url);
  rememberRecentGame(randomGame);
};

document.getElementById('recentGamesBtn').onclick = () => {
  const recent = JSON.parse(localStorage.getItem('recentGame'));
  if (!recent) return alert('No recent game yet!');
  openWebsite(recent.url);
};

function loadGamesPage(){
  const grid=document.getElementById('allGamesGrid');
  grid.innerHTML='';
  const saved=JSON.parse(localStorage.getItem('customPresets')||'[]');
  const starred=JSON.parse(localStorage.getItem('starredGames')||'[]');
  const allGames = [...defaultGames,...saved];

  allGames.sort((a,b)=>{
    const aStar=starred.includes(a.name);
    const bStar=starred.includes(b.name);
    if(aStar && !bStar) return -1;
    if(!aStar && bStar) return 1;
    return 0;
  });

  allGames.forEach((g, idx) => {
    const card = createGameCard(g, idx, saved, starred, defaultGames.length, loadGamesPage);
    grid.appendChild(card);
  });
}

function loadarcadeGamesPage(){
  const grid=document.getElementById('arcadeGamesGrid');
  grid.innerHTML='';
  const saved=JSON.parse(localStorage.getItem('customPresets')||'[]');
  const starred=JSON.parse(localStorage.getItem('starredGames')||'[]');
  const allGames = [...arcadeGames,...saved];

  allGames.sort((a,b)=>{
    const aStar=starred.includes(a.name);
    const bStar=starred.includes(b.name);
    if(aStar && !bStar) return -1;
    if(!aStar && bStar) return 1;
    return 0;
  });

  allGames.forEach((g,idx)=>{
    const card = createGameCard(g, idx, saved, starred, arcadeGames.length, loadarcadeGamesPage);
    grid.appendChild(card);
  });
}

function loadpuzzleGamesPage(){
  const grid=document.getElementById('puzzleGamesGrid');
  grid.innerHTML='';
  const saved=JSON.parse(localStorage.getItem('customPresets')||'[]');
  const starred=JSON.parse(localStorage.getItem('starredGames')||'[]');
  const allGames = [...puzzleGames,...saved];

  allGames.sort((a,b)=>{
    const aStar=starred.includes(a.name);
    const bStar=starred.includes(b.name);
    if(aStar && !bStar) return -1;
    if(!aStar && bStar) return 1;
    return 0;
  });

  allGames.forEach((g, idx) => {
    const card = createGameCard(g, idx, saved, starred, puzzleGames.length, loadpuzzleGamesPage);
    grid.appendChild(card);
  });
}

function loadobbyGamesPage(){
  const grid=document.getElementById('obbyGamesGrid');
  grid.innerHTML='';
  const saved=JSON.parse(localStorage.getItem('customPresets')||'[]');
  const starred=JSON.parse(localStorage.getItem('starredGames')||'[]');
  const allGames = [...obbyGames,...saved];

  allGames.sort((a,b)=>{
    const aStar=starred.includes(a.name);
    const bStar=starred.includes(b.name);
    if(aStar && !bStar) return -1;
    if(!aStar && bStar) return 1;
    return 0;
  });

  allGames.forEach((g, idx) => {
    const card = createGameCard(g, idx, saved, starred, obbyGames.length, loadobbyGamesPage);
    grid.appendChild(card);
  });
}

function loadsportsGamesPage(){
  const grid=document.getElementById('sportsGamesGrid');
  grid.innerHTML='';
  const saved=JSON.parse(localStorage.getItem('customPresets')||'[]');
  const starred=JSON.parse(localStorage.getItem('starredGames')||'[]');
  const allGames = [...sportsGames,...saved];

  allGames.sort((a,b)=>{
    const aStar=starred.includes(a.name);
    const bStar=starred.includes(b.name);
    if(aStar && !bStar) return -1;
    if(!aStar && bStar) return 1;
    return 0;
  });

  allGames.forEach((g, idx) => {
    const card = createGameCard(g, idx, saved, starred, sportsGames.length, loadsportsGamesPage);
    grid.appendChild(card);
  });
}

function loadmultiGamesPage(){
  const grid=document.getElementById('multiGamesGrid');
  grid.innerHTML='';
  const saved=JSON.parse(localStorage.getItem('customPresets')||'[]');
  const starred=JSON.parse(localStorage.getItem('starredGames')||'[]');
  const allGames = [...multiGames,...saved];

  allGames.sort((a,b)=>{
    const aStar=starred.includes(a.name);
    const bStar=starred.includes(b.name);
    if(aStar && !bStar) return -1;
    if(!aStar && bStar) return 1;
    return 0;
  });

  allGames.forEach((g, idx) => {
    const card = createGameCard(g, idx, saved, starred, multiGames.length, loadmultiGamesPage);
    grid.appendChild(card);
  });
}

function showGamesPage(){
  const home=document.getElementById('homePage');
  const games=document.getElementById('gamesPage');
  const multi=document.getElementById('multigamesPage');
  const arcade=document.getElementById('arcadegamesPage');
  const puzzle=document.getElementById('puzzlegamesPage');
  const obby=document.getElementById('obbygamesPage');
  home.style.opacity='1';
  games.style.display='flex';
  multi.style.display='1';
  arcade.style.display='1';
  puzzle.style.display='1';
  obby.style.display='1';
  requestAnimationFrame(()=>{
    home.style.transition='opacity 0.5s';
    home.style.opacity='0';
    setTimeout(()=>{
      home.style.display='none';
      games.classList.add('show');
      loadGamesPage();
    },500);
  });
}

function showMultiGamesPage(){
  const home=document.getElementById('homePage');
  const games=document.getElementById('gamesPage');
  const multi=document.getElementById('multigamesPage');
  const arcade=document.getElementById('arcadegamesPage');
  const puzzle=document.getElementById('puzzlegamesPage');
  const obby=document.getElementById('obbygamesPage');
  home.style.opacity='1';
  games.style.display='1';
  multi.style.display='flex';
  arcade.style.display='1';
  puzzle.style.display='1';
  obby.style.display='1';
  requestAnimationFrame(()=>{
    home.style.transition='opacity 0.5s';
    home.style.opacity='0';
    setTimeout(()=>{
      home.style.display='none';
      multi.classList.add('show');
      loadmultiGamesPage();
    },500);
  });
}

function showArcadeGamesPage(){
  const home=document.getElementById('homePage');
  const games=document.getElementById('gamesPage');
  const multi=document.getElementById('multigamesPage');
  const arcade=document.getElementById('arcadegamesPage');
  const puzzle=document.getElementById('puzzlegamesPage');
  const obby=document.getElementById('obbygamesPage');
  home.style.opacity='1';
  games.style.display='1';
  multi.style.display='1';
  arcade.style.display='flex';
  puzzle.style.display='1';
  obby.style.display='1';
  requestAnimationFrame(()=>{
    home.style.transition='opacity 0.5s';
    home.style.opacity='0';
    setTimeout(()=>{
      home.style.display='none';
      arcade.classList.add('show');
      loadarcadeGamesPage();
    },500);
  });
}

function showPuzzleGamesPage(){
  const home=document.getElementById('homePage');
  const games=document.getElementById('gamesPage');
  const multi=document.getElementById('multigamesPage');
  const arcade=document.getElementById('arcadegamesPage');
  const puzzle=document.getElementById('puzzlegamesPage');
  const obby=document.getElementById('obbygamesPage');
  home.style.opacity='1';
  games.style.display='1';
  multi.style.display='1';
  arcade.style.display='1';
  puzzle.style.display='flex';
  obby.style.display='1';
  requestAnimationFrame(()=>{
    home.style.transition='opacity 0.5s';
    home.style.opacity='0';
    setTimeout(()=>{
      home.style.display='none';
      puzzle.classList.add('show');
      loadpuzzleGamesPage();
    },500);
  });
}

function showObbyGamesPage(){
  const home=document.getElementById('homePage');
  const games=document.getElementById('gamesPage');
  const multi=document.getElementById('multigamesPage');
  const arcade=document.getElementById('arcadegamesPage');
  const puzzle=document.getElementById('puzzlegamesPage');
  const obby=document.getElementById('obbygamesPage');
  const sports=document.getElementById('sportsgamesPage');
  home.style.opacity='1';
  games.style.display='1';
  multi.style.display='1';
  arcade.style.display='1';
  puzzle.style.display='1';
  sports.style.display='1';
  obby.style.display='flex';
  requestAnimationFrame(()=>{
    home.style.transition='opacity 0.5s';
    home.style.opacity='0';
    setTimeout(()=>{
      home.style.display='none';
      obby.classList.add('show');
      loadobbyGamesPage();
    },500);
  });
}

function showHomePage(){
  const home=document.getElementById('homePage');
  const games=document.getElementById('gamesPage');
  const multi=document.getElementById('multigamesPage');
  const arcade=document.getElementById('arcadegamesPage');
  const puzzle=document.getElementById('puzzlegamesPage');
  const obby=document.getElementById('obbygamesPage');
  const sports=document.getElementById('sportsgamesPage');
  games.classList.remove('show');
  multi.classList.remove('show');
  arcade.classList.remove('show');
  puzzle.classList.remove('show');
  obby.classList.remove('show');
  sports.classList.remove('show');
  setTimeout(()=>{
    games.style.display='none';
    multi.style.display='none';
    arcade.style.display='none';
    puzzle.style.display='none';
    obby.style.display='none';
    sports.style.display='none';
    home.style.display='block';
    requestAnimationFrame(()=>home.style.opacity='1');
  },500);
}

document.getElementById('loadWebsite').onclick=()=>{
  const url=document.getElementById('websiteInput').value.trim();
  openWebsite(url);
};
document.getElementById('saveWebsite').onclick=()=>{
  const url=document.getElementById('websiteInput').value.trim();
  if(!url)return alert('Enter a URL first');
  const name=prompt('Enter a name for this site:');
  if(!name)return;
  const saved=JSON.parse(localStorage.getItem('customPresets')||'[]');
  saved.push({name,url});
  localStorage.setItem('customPresets',JSON.stringify(saved));
  alert('Saved!');
};
document.getElementById('allGamesBtn').onclick=showGamesPage;
document.getElementById('multiGamesBtn').onclick=showMultiGamesPage;
document.getElementById('arcadeGamesBtn').onclick=showArcadeGamesPage;
document.getElementById('puzzleGamesBtn').onclick=showPuzzleGamesPage;
document.getElementById('obbyGamesBtn').onclick=showObbyGamesPage;
document.getElementById('sportsGamesBtn').onclick=showSportsGamesPage;
document.getElementById('backBtn').onclick=showHomePage;
document.getElementById('multiBackBtn').onclick=showHomePage;
document.getElementById('arcadeBackBtn').onclick=showHomePage;
document.getElementById('puzzleBackBtn').onclick=showHomePage;
document.getElementById('obbyBackBtn').onclick=showHomePage;
document.getElementById('sportsBackBtn').onclick=showHomePage;

function showSportsGamesPage(){
  const home=document.getElementById('homePage');
  const games=document.getElementById('gamesPage');
  const multi=document.getElementById('multigamesPage');
  const arcade=document.getElementById('arcadegamesPage');
  const puzzle=document.getElementById('puzzlegamesPage');
  const obby=document.getElementById('obbygamesPage');
  const sports=document.getElementById('sportsgamesPage');
  home.style.opacity='0';
  games.style.display='none';
  multi.style.display='none';
  arcade.style.display='none';
  puzzle.style.display='none';
  obby.style.display='none';
  sports.style.display='flex';
  requestAnimationFrame(()=>{
    home.style.transition='opacity 0.5s';
    setTimeout(()=>{
      home.style.display='none';
      sports.classList.add('show');
      loadsportsGamesPage();
    },500);
  });
}

const gear=document.getElementById('gear'),menu=document.getElementById('settingsMenu');
gear.onclick=()=>menu.classList.toggle('show');
document.addEventListener('click',e=>{if(!menu.contains(e.target)&&e.target!==gear)menu.classList.remove('show');});

document.getElementById('lightToggle').onclick = () => {
  const isLight = document.body.classList.toggle('light');
  localStorage.setItem('kuppyLightMode', isLight);
  const savedTheme = JSON.parse(localStorage.getItem('kuppyTheme')) || {bg:'#0f1724', card:'#0b1220'};
  if(isLight){
    document.documentElement.style.setProperty('--bg', lighten(savedTheme.bg));
    document.documentElement.style.setProperty('--card', lighten(savedTheme.card));
    document.documentElement.style.setProperty('--text', '#111');
  } else {
    document.documentElement.style.setProperty('--bg', savedTheme.bg);
    document.documentElement.style.setProperty('--card', savedTheme.card);
    document.documentElement.style.setProperty('--text', '#e6eef8');
  }
};

let themeIndex = 0;
const themes = [
  { accent: '#FF0000', bg: '#2b0a0a', card: '#1b0505' },
  { accent: '#FF7F00', bg: '#2c1400', card: '#1f0a00' },
  { accent: '#FFFF00', bg: '#2b2b00', card: '#1a1a00' },
  { accent: '#00FF00', bg: '#002b00', card: '#001a00' },
  { accent: '#BFFF00', bg: '#1a2b00', card: '#0d1500' },
  { accent: '#00FFFF', bg: '#002b2b', card: '#001a1a' },
  { accent: '#0000FF', bg: '#00002b', card: '#00001a' },
  { accent: '#4B0082', bg: '#10002b', card: '#080015' },
  { accent: '#8B00FF', bg: '#1a002b', card: '#100015' },
  { accent: '#FFD700', bg: '#2b2200', card: '#1a1600' },
  { accent: '#C0C0C0', bg: '#2b2b2b', card: '#1a1a1a' },
  { accent: '#50C878', bg: '#002b1a', card: '#00140d' },
  { accent: '#9B111E', bg: '#2b0005', card: '#1a0002' },
  { accent: '#CCCCFF', bg: '#1a1a2b', card: '#0d0d15' },
  { accent: '#B87333', bg: '#2b1a0f', card: '#1a0d08' },
  { accent: '#B9F2FF', bg: '#1a2b2b', card: '#0d1515' }
];
document.getElementById('colorToggle').onclick=()=>{
  themeIndex=(themeIndex+1)%themes.length;
  const t=themes[themeIndex];
  localStorage.setItem('kuppyTheme', JSON.stringify(t));
  const isLight = document.body.classList.contains('light');
  document.documentElement.style.setProperty('--accent', t.accent);
  document.documentElement.style.setProperty('--bg', isLight ? lighten(t.bg) : t.bg);
  document.documentElement.style.setProperty('--card', isLight ? lighten(t.card) : t.card);
};

function getDailyGame() {
  const saved = JSON.parse(localStorage.getItem('customPresets') || '[]');
  const allGames = [...defaultGames, ...saved];
  if (allGames.length === 0) return alert('No games available!');

  const date = new Date();
  const dayOfYear = Math.floor(
    (Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()) -
     Date.UTC(date.getFullYear(), 0, 0)) / 24 / 60 / 60 / 1000
  );

  const index = dayOfYear % allGames.length;
  const dailyGame = allGames[index];

  openWebsite(dailyGame.url);
}

document.getElementById('dailyGameBtn').onclick = getDailyGame;

  const loginShell = document.getElementById('loginShell');
  const homePage = document.getElementById('homePage');
  const loginUsername = document.getElementById('loginUsername');
  const loginPassword = document.getElementById('loginPassword');
  const loginBtn = document.getElementById('loginBtn');
  const loginMsg = document.getElementById('loginMsg');
  const userDisplay = document.getElementById('userDisplay');

const users = {
  "Kuppy": "ILoveKat",
  "katvq": "Rose1013.",
  "Parody": "*****",
  "test": "test",
};

loginShell.classList.add('fade');
homePage.classList.add('fade');

loginBtn.onclick = () => {
  const user = loginUsername.value.trim();
  const pass = loginPassword.value.trim();

  if (!user || !pass) {
    loginMsg.textContent = "Enter username & password";
    return;
  }

  if (!(users[user] === pass || pass === weeklyPassword)) {
    loginMsg.textContent = "Incorrect username or password";
    return;
  }

  loginShell.classList.add('hidden');
  setTimeout(() => {
    loginShell.style.display = 'none';
    homePage.style.display = 'block';
    setTimeout(() => {
      homePage.classList.remove('hidden');
      startTyping();
    }, 10);
    userDisplay.textContent = user;
  }, 500);
};

userDisplay.addEventListener('click', () => {
  const confirmSignOut = confirm("Are you sure you want to log out?");
  if (!confirmSignOut) return;

  homePage.classList.add('hidden');
  setTimeout(() => {
    homePage.style.display = 'none';
    loginShell.style.display = 'flex';
    setTimeout(() => loginShell.classList.remove('hidden'), 10);
    loginUsername.value = '';
    loginPassword.value = '';
  }, 500);
});

let inactivityTimer;

function kickUser() {
  alert("You have been inactive for 30 minutes. You will be signed out.");
  window.location.href = "about:blank";
}

function resetInactivityTimer() {
  clearTimeout(inactivityTimer);
  inactivityTimer = setTimeout(kickUser, 30 * 60 * 1000);
}

["mousemove", "keydown", "click", "scroll", "touchstart"].forEach(evt => {
  document.addEventListener(evt, resetInactivityTimer, false);
});

resetInactivityTimer();

function getWeeklyPassword() {
  const date = new Date();

  const firstDayOfYear = new Date(date.getFullYear(), 0, 1);
  const days = Math.floor((date - firstDayOfYear) / (24 * 60 * 60 * 1000));
  const week = Math.ceil((days + firstDayOfYear.getDay() + 1) / 7);

  const seed = date.getFullYear() + "-W" + week;

  let hash = 0;
  for (let i = 0; i < seed.length; i++) {
    hash = (hash * 31 + seed.charCodeAt(i)) % 999999;
  }

  return "Kuppy" + hash.toString(16).toUpperCase();
}

const secretCode = "KupCloakPass";
const weeklyPassword = getWeeklyPassword();
document.getElementById("passwordUnlock").addEventListener("click", () => {
  const entered = prompt("Enter special code:");
  if (entered === secretCode) {
    alert(`‚úÖ Your weekly password is:\n\n${weeklyPassword}`);
  } else if (entered !== null) {
    alert("‚ùå Wrong code.");
  }
});

const passwordInput = document.getElementById('loginPassword');
const togglePassword = document.getElementById('togglePassword');

togglePassword.addEventListener('click', () => {
  const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
  passwordInput.setAttribute('type', type);
  togglePassword.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üôà';
});

const bgButton = document.getElementById('bgButton');
const bgUpload = document.getElementById('bgUpload');

bgButton.addEventListener('click', () => bgUpload.click());

bgUpload.addEventListener('change', (event) => {
  const file = event.target.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = function(e) {
    const dataURL = e.target.result;
    localStorage.setItem('customBackground', dataURL);
    document.body.style.backgroundImage = `url(${dataURL})`;
  };
  reader.readAsDataURL(file);
});

window.addEventListener('load', () => {
  const savedBG = localStorage.getItem('customBackground');
  if (savedBG) {
    document.body.style.backgroundImage = `url(${savedBG})`;
    document.body.style.backgroundSize = 'cover';
    document.body.style.backgroundPosition = 'center';
  }
});

</script>
</body>
</html>
